# Maintainer: Samir Benmendil <ram-z[at]chakra-project[dot]org>
# Contributor: aur2ccr (http://ddg.gg/?q=!ccr+aur2ccr&t=chakra)
# Contributor: Bart≈Çomiej Piotrowski <nospam@bpiotrowski.pl>

pkgname=gitolite
pkgver=3.6.1
pkgrel=1
pkgdesc="An access control layer on top of git" 
arch=('any')
url="https://github.com/sitaramc/gitolite"
license=('GPL2')
depends=('git' 'perl')
conflicts=('gitolite-git' 'gitolite-g2-git' 'gitolite-g3-git')
source=("https://github.com/sitaramc/$pkgname/archive/v${pkgver}.tar.gz")
sha1sums=('c453231813c11de9c4709f3eb52f543e3fbb7104')

prepare() {
  cd $pkgname-$pkgver
  echo "v$pkgver" > src/VERSION
}

package() {
  cd $pkgname-$pkgver

  install -d "${pkgdir}"/usr/lib/gitolite
  cp -RpP src/* "${pkgdir}"/usr/lib/gitolite

  install -d "${pkgdir}"/usr/bin
  ln -s /usr/lib/gitolite/gitolite ${pkgdir}/usr/bin/
}
