# Maintainer: Samir Benmendil <samir.benmendil@gmail.com>

pkgname=joxy-git
_pkgname=joxy
pkgver=0.2.0.32.gc3d1dbf
pkgrel=1
pkgdesc="Java Swing Look and Feel for integration with the KDE Oxygen theme."
arch=('any')
url="http://www.denvelop.nl/joxy/"
screenshot="http://sourceforge.net/projects/joxy/screenshots/joxy_current.png"
license=('GPL3')
depends=('java-environment')
makedepends=('git')
conflicts=('joxy')
install=joxy.install
source=(${pkgname}::git://git.code.sf.net/p/joxy/code)
md5sums=('SKIP')

pkgver() {
  cd $pkgname
  git describe --always | sed 's|-|.|g'
}

build() {
  cd "$pkgname/src"

  ./compile.sh

  find joxy/ -name '*.java' -exec javac -cp . {} +
}

package() {
  cd "$pkgname/src"

  find joxy/ -name '*.class' -exec jar -cvf ${_pkgname}.jar {} +

  install -Dm644 "${_pkgname}.jar" "${pkgdir}/$JAVA_HOME/jre/lib/ext/${_pkgname}-${pkgver}.jar"
  _arch=amd64
  install -Dm755 "libjoxy.so" "${pkgdir}/$JAVA_HOME/jre/lib/${_arch}/libjoxy.so"
}

# vim:set ts=2 sw=2 et:
